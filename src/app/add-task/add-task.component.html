<app-header></app-header>

<div class="container py-4 mt-5">
  <div class="card shadow">
    <div class="card-header bg-primary text-white">
      <h3 class="text-center mb-0">Add a New Task</h3>
    </div>
    <div class="card-body">
      <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
        
        <!-- Nom et Description (inchangés) -->
        
        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Start Date</mat-label>
              <input matInput type="date" formControlName="startDate">
              <mat-error *ngIf="taskForm.get('startDate')?.invalid">
                Start date is required
              </mat-error>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>End Date</mat-label>
              <input matInput type="date" formControlName="finishDate">
              <mat-error *ngIf="taskForm.hasError('dateError')">
                End date must be after start date
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Status</mat-label>
              <mat-select formControlName="etatTache">
                <mat-option value="TODO">TODO</mat-option>
                <mat-option value="DOING">DOING</mat-option>
                <mat-option value="SUSPENDED">SUSPENDED</mat-option>
                <mat-option value="DONE">DONE</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Priority</mat-label>
              <mat-select formControlName="priorite">
                <mat-option value="HAUTE">High</mat-option>
                <mat-option value="MOYENNE">Medium</mat-option>
                <mat-option value="BASSE">Low</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <!-- Reste du formulaire inchangé -->

        <div class="d-flex justify-content-end mt-4">
          <button type="button" class="btn btn-outline-secondary me-2" 
                  (click)="navigateToTasks()">Cancel</button>
          <button type="submit" class="btn btn-primary" 
                  [disabled]="taskForm.invalid">Add Task</button>
        </div>
      </form>
    </div>
  </div>
</div>